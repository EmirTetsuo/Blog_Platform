{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\neo\\\\Desktop\\\\veb\\\\23.02.23\\\\js projects\\\\blog-platform\\\\frontend\\\\src\\\\pages\\\\PostsPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from '../utils/axios';\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ProfilePage = () => {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [avatar, setAvatar] = useState(null);\n  const [newAvatar, setNewAvatar] = useState(null);\n  const history = useHistory(); // Получение данных о пользователе\n\n  const fetchUserData = async () => {\n    try {\n      const {\n        data\n      } = await axios.get('/auth/getMe');\n      setUser(data);\n      setAvatar(data.avatar || '/default-avatar.png'); // Если аватар не найден, отображаем дефолтное изображение\n    } catch (error) {\n      console.error(error);\n    }\n  }; // Обработчик для загрузки нового аватара\n\n\n  const handleAvatarChange = event => {\n    const file = event.target.files[0];\n\n    if (file) {\n      setNewAvatar(file);\n    }\n  }; // Отправка нового аватара на сервер\n\n\n  const uploadAvatar = async () => {\n    const formData = new FormData();\n    formData.append('avatar', newAvatar);\n\n    try {\n      await axios.post('/auth/upload-avatar', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      fetchUserData(); // После загрузки аватара обновляем информацию о пользователе\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  useEffect(() => {\n    fetchUserData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-1/2 mx-auto py-10 flex flex-col items-center gap-5\",\n    children: user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold\",\n        children: [\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \", user.username, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: avatar,\n          alt: \"User Avatar\",\n          className: \"w-32 h-32 rounded-full object-cover border-4 border-gray-300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"avatar\",\n          className: \"absolute bottom-0 right-0 bg-white p-2 rounded-full cursor-pointer\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u270E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"avatar\",\n          onChange: handleAvatarChange,\n          className: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this), newAvatar && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: uploadAvatar,\n        className: \"mt-4 py-2 px-4 bg-blue-500 text-white rounded-md\",\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProfilePage, \"PEvmHyLou3kfsyd10DF6LeHd5ts=\", false, function () {\n  return [useHistory];\n});\n\n_c = ProfilePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["React","useEffect","useState","axios","useHistory","ProfilePage","user","setUser","avatar","setAvatar","newAvatar","setNewAvatar","history","fetchUserData","data","get","error","console","handleAvatarChange","event","file","target","files","uploadAvatar","formData","FormData","append","post","headers","username"],"sources":["C:/Users/neo/Desktop/veb/23.02.23/js projects/blog-platform/frontend/src/pages/PostsPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from '../utils/axios'\nimport { useHistory } from 'react-router-dom'\n\nexport const ProfilePage = () => {\n    const [user, setUser] = useState(null)\n    const [avatar, setAvatar] = useState(null)\n    const [newAvatar, setNewAvatar] = useState(null)\n    const history = useHistory()\n\n    // Получение данных о пользователе\n    const fetchUserData = async () => {\n        try {\n            const { data } = await axios.get('/auth/getMe')\n            setUser(data)\n            setAvatar(data.avatar || '/default-avatar.png') // Если аватар не найден, отображаем дефолтное изображение\n        } catch (error) {\n            console.error(error)\n        }\n    }\n\n    // Обработчик для загрузки нового аватара\n    const handleAvatarChange = (event) => {\n        const file = event.target.files[0]\n        if (file) {\n            setNewAvatar(file)\n        }\n    }\n\n    // Отправка нового аватара на сервер\n    const uploadAvatar = async () => {\n        const formData = new FormData()\n        formData.append('avatar', newAvatar)\n\n        try {\n            await axios.post('/auth/upload-avatar', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            })\n            fetchUserData() // После загрузки аватара обновляем информацию о пользователе\n        } catch (error) {\n            console.error(error)\n        }\n    }\n\n    useEffect(() => {\n        fetchUserData()\n    }, [])\n\n    return (\n        <div className=\"w-1/2 mx-auto py-10 flex flex-col items-center gap-5\">\n            {user ? (\n                <>\n                    <h1 className=\"text-2xl font-bold\">Привет, {user.username}!</h1>\n                    <div className=\"relative\">\n                        <img\n                            src={avatar}\n                            alt=\"User Avatar\"\n                            className=\"w-32 h-32 rounded-full object-cover border-4 border-gray-300\"\n                        />\n                        <label htmlFor=\"avatar\" className=\"absolute bottom-0 right-0 bg-white p-2 rounded-full cursor-pointer\">\n                            <span>✎</span>\n                        </label>\n                        <input\n                            type=\"file\"\n                            id=\"avatar\"\n                            onChange={handleAvatarChange}\n                            className=\"hidden\"\n                        />\n                    </div>\n\n                    {newAvatar && (\n                        <button\n                            onClick={uploadAvatar}\n                            className=\"mt-4 py-2 px-4 bg-blue-500 text-white rounded-md\"\n                        >\n                            Загрузить новый аватар\n                        </button>\n                    )}\n                </>\n            ) : (\n                <p>Загрузка данных пользователя...</p>\n            )}\n        </div>\n    )\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;;AAEA,OAAO,MAAMC,WAAW,GAAG,MAAM;EAAA;;EAC7B,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAAC,IAAD,CAAhC;EACA,MAAM,CAACM,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAC,IAAD,CAApC;EACA,MAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,IAAD,CAA1C;EACA,MAAMU,OAAO,GAAGR,UAAU,EAA1B,CAJ6B,CAM7B;;EACA,MAAMS,aAAa,GAAG,YAAY;IAC9B,IAAI;MACA,MAAM;QAAEC;MAAF,IAAW,MAAMX,KAAK,CAACY,GAAN,CAAU,aAAV,CAAvB;MACAR,OAAO,CAACO,IAAD,CAAP;MACAL,SAAS,CAACK,IAAI,CAACN,MAAL,IAAe,qBAAhB,CAAT,CAHA,CAGgD;IACnD,CAJD,CAIE,OAAOQ,KAAP,EAAc;MACZC,OAAO,CAACD,KAAR,CAAcA,KAAd;IACH;EACJ,CARD,CAP6B,CAiB7B;;;EACA,MAAME,kBAAkB,GAAIC,KAAD,IAAW;IAClC,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;;IACA,IAAIF,IAAJ,EAAU;MACNT,YAAY,CAACS,IAAD,CAAZ;IACH;EACJ,CALD,CAlB6B,CAyB7B;;;EACA,MAAMG,YAAY,GAAG,YAAY;IAC7B,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;IACAD,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BhB,SAA1B;;IAEA,IAAI;MACA,MAAMP,KAAK,CAACwB,IAAN,CAAW,qBAAX,EAAkCH,QAAlC,EAA4C;QAC9CI,OAAO,EAAE;UACL,gBAAgB;QADX;MADqC,CAA5C,CAAN;MAKAf,aAAa,GANb,CAMgB;IACnB,CAPD,CAOE,OAAOG,KAAP,EAAc;MACZC,OAAO,CAACD,KAAR,CAAcA,KAAd;IACH;EACJ,CAdD;;EAgBAf,SAAS,CAAC,MAAM;IACZY,aAAa;EAChB,CAFQ,EAEN,EAFM,CAAT;EAIA,oBACI;IAAK,SAAS,EAAC,sDAAf;IAAA,UACKP,IAAI,gBACD;MAAA,wBACI;QAAI,SAAS,EAAC,oBAAd;QAAA,qDAA4CA,IAAI,CAACuB,QAAjD;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAK,SAAS,EAAC,UAAf;QAAA,wBACI;UACI,GAAG,EAAErB,MADT;UAEI,GAAG,EAAC,aAFR;UAGI,SAAS,EAAC;QAHd;UAAA;UAAA;UAAA;QAAA,QADJ,eAMI;UAAO,OAAO,EAAC,QAAf;UAAwB,SAAS,EAAC,oEAAlC;UAAA,uBACI;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QADJ;UAAA;UAAA;UAAA;QAAA,QANJ,eASI;UACI,IAAI,EAAC,MADT;UAEI,EAAE,EAAC,QAFP;UAGI,QAAQ,EAAEU,kBAHd;UAII,SAAS,EAAC;QAJd;UAAA;UAAA;UAAA;QAAA,QATJ;MAAA;QAAA;QAAA;QAAA;MAAA,QAFJ,EAmBKR,SAAS,iBACN;QACI,OAAO,EAAEa,YADb;QAEI,SAAS,EAAC,kDAFd;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QApBR;IAAA,gBADC,gBA8BD;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EA/BR;IAAA;IAAA;IAAA;EAAA,QADJ;AAoCH,CAlFM;;GAAMlB,W;UAIOD,U;;;KAJPC,W"},"metadata":{},"sourceType":"module"}